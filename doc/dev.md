# 开发文档

## 功能
- 项目及构建
- [x] 项目 CRUD 
- [x] 项目解析
- [ ] 构建计划 CRUD
- [ ] 构建计划配置
- [ ] 执行构建任务
- [ ] 构建历史
- 环境
- [ ] 工具初始化
- [x] 工具 CRUD

## 乱七八糟的想法
- [ ] 项目仓库类型区分 GIT、DIR（本地目录）、SVN 三种，GIT、SVN 支持用户名密码导入和 SSH 私钥导入，这些信息以 json 格式存储在 config 属性中
- [ ] 服务器管理，以 SSH 方式配置 IP、PORT，可以通过 SSH 协议访问服务器
- [ ] SSH Key 的管理，支持生成 SSH 私钥文件（可设置密码），可以用来访问服务器
- [ ] 有个叫做 Guacamole 的项目似乎可以远程控制服务器，尝试融合进来
- [ ] 

## 功能拆解流程
- 项目解析
- [x] 区分项目仓库类型：GIT、DIR、SVN
    - GIT 项目解析
    - [x] 1. 判断项目目录下是否存在 .git 目录，若存在表示已经导入过仓库，执行第 3 步，若不存在执行第 2 步
    - [x] 2. 从 config 属性中解析仓库信息，支持用户名密码导入和 SSH 私钥导入，执行 git clone xxx
    - [ ] 3. 遍历整个目录树，解析指定文件（比如 package.json、pom.xml），汇总到 parsedInfo 属性，存储到数据库
    - DIR 项目解析
    - [x] 判断目录是否存在，若存在继续执行
    - [ ] 遍历整个目录树，解析指定文件（比如 package.json、pom.xml），汇总到 parsedInfo 属性，存储到数据库
    - SVN 项目解析
    - [ ] 1. 判断项目目录下是否存在 .svn 目录，若存在表示已经导入过仓库，执行第 3 步，若不存在执行第 2 步
    - [ ] 2. 从 config 属性中解析仓库信息，支持用户名密码导入和 SSH 私钥导入，把 SVN 项目克隆到本地
    - [ ] 3. 遍历整个目录树，解析指定文件（比如 package.json、pom.xml），汇总到 parsedInfo 属性，存储到数据库
- GIT 仓库导入
- [x] 支持三种方式认证：用户名密码、SSH 私钥、AccessToken
- [x] 访问 GIT 仓库两种协议：HTTP 和 SSH，HTTP 支持 Credentials 和 AccessToken，SSH 支持 SSH 私钥访问
- 构建计划
- [ ] 构建计划是根据解析后的项目信息（比如 pom.xml、package.json），创建一个或者多个构建计划。比如一个 fat jar 项目可以按照环境来创建两个构建计划（生产环境、测试环境）；一个复合项目（既有 fat jar，又有 vue 项目）可以根据项目的打包方式来分别创建两个构建计划（后端服务 pom.xml、前端项目 vue）；甚至采用前面两种方式组合，先根据环境创建构建计划，然后再分别添加不同的打包方式构建计划
- [ ] 构建计划需要在创建的时候指定构建流程，比如 java+maven 项目，需要指定使用的 JDK，maven 信息，以及 maven 打包命令；Node 项目需要指定 Node 环境，打包命令
- [ ] 构建计划不应该包含 GIT 或者 SVN 的分支信息，仅仅指定完成这个计划执行需要的环境、工具、以及步骤信息
- 构建任务
- [ ] 构建任务是为了触发构建计划，是具体实施的步骤。如果是 GIT 或者 SVN 项目时，该步骤需要指定具体的分支信息，以此作为构建计划的源代码按照构建计划中的构建流程执行